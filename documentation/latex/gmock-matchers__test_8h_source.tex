\hypertarget{gmock-matchers__test_8h_source}{}\doxysection{gmock-\/matchers\+\_\+test.h}
\label{gmock-matchers__test_8h_source}\index{build/\_deps/googletest-\/src/googlemock/test/gmock-\/matchers\_test.h@{build/\_deps/googletest-\/src/googlemock/test/gmock-\/matchers\_test.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// Copyright 2007, Google Inc.}}
\DoxyCodeLine{2 \textcolor{comment}{// All rights reserved.}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 \textcolor{comment}{// Redistribution and use in source and binary forms, with or without}}
\DoxyCodeLine{5 \textcolor{comment}{// modification, are permitted provided that the following conditions are}}
\DoxyCodeLine{6 \textcolor{comment}{// met:}}
\DoxyCodeLine{7 \textcolor{comment}{//}}
\DoxyCodeLine{8 \textcolor{comment}{//     * Redistributions of source code must retain the above copyright}}
\DoxyCodeLine{9 \textcolor{comment}{// notice, this list of conditions and the following disclaimer.}}
\DoxyCodeLine{10 \textcolor{comment}{//     * Redistributions in binary form must reproduce the above}}
\DoxyCodeLine{11 \textcolor{comment}{// copyright notice, this list of conditions and the following disclaimer}}
\DoxyCodeLine{12 \textcolor{comment}{// in the documentation and/or other materials provided with the}}
\DoxyCodeLine{13 \textcolor{comment}{// distribution.}}
\DoxyCodeLine{14 \textcolor{comment}{//     * Neither the name of Google Inc. nor the names of its}}
\DoxyCodeLine{15 \textcolor{comment}{// contributors may be used to endorse or promote products derived from}}
\DoxyCodeLine{16 \textcolor{comment}{// this software without specific prior written permission.}}
\DoxyCodeLine{17 \textcolor{comment}{//}}
\DoxyCodeLine{18 \textcolor{comment}{// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS}}
\DoxyCodeLine{19 \textcolor{comment}{// "{}AS IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT}}
\DoxyCodeLine{20 \textcolor{comment}{// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR}}
\DoxyCodeLine{21 \textcolor{comment}{// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT}}
\DoxyCodeLine{22 \textcolor{comment}{// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,}}
\DoxyCodeLine{23 \textcolor{comment}{// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT}}
\DoxyCodeLine{24 \textcolor{comment}{// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,}}
\DoxyCodeLine{25 \textcolor{comment}{// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY}}
\DoxyCodeLine{26 \textcolor{comment}{// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT}}
\DoxyCodeLine{27 \textcolor{comment}{// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE}}
\DoxyCodeLine{28 \textcolor{comment}{// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{comment}{// Google Mock -\/ a framework for writing C++ mock classes.}}
\DoxyCodeLine{31 \textcolor{comment}{//}}
\DoxyCodeLine{32 \textcolor{comment}{// This file tests some commonly used argument matchers.}}
\DoxyCodeLine{33 }
\DoxyCodeLine{34 \textcolor{preprocessor}{\#ifndef GOOGLEMOCK\_TEST\_GMOCK\_MATCHERS\_TEST\_H\_}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#define GOOGLEMOCK\_TEST\_GMOCK\_MATCHERS\_TEST\_H\_}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#include <time.h>}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{preprocessor}{\#include <array>}}
\DoxyCodeLine{41 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#include <deque>}}
\DoxyCodeLine{43 \textcolor{preprocessor}{\#include <forward\_list>}}
\DoxyCodeLine{44 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{45 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{46 \textcolor{preprocessor}{\#include <iterator>}}
\DoxyCodeLine{47 \textcolor{preprocessor}{\#include <limits>}}
\DoxyCodeLine{48 \textcolor{preprocessor}{\#include <list>}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{50 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{51 \textcolor{preprocessor}{\#include <set>}}
\DoxyCodeLine{52 \textcolor{preprocessor}{\#include <sstream>}}
\DoxyCodeLine{53 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#include <type\_traits>}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#include <unordered\_set>}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{preprocessor}{\#include "{}gmock/gmock-\/matchers.h"{}}}
\DoxyCodeLine{61 \textcolor{preprocessor}{\#include "{}gmock/gmock-\/more-\/matchers.h"{}}}
\DoxyCodeLine{62 \textcolor{preprocessor}{\#include "{}gmock/gmock.h"{}}}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#include "{}gtest/gtest-\/spi.h"{}}}
\DoxyCodeLine{64 \textcolor{preprocessor}{\#include "{}gtest/gtest.h"{}}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66 \textcolor{keyword}{namespace }testing \{}
\DoxyCodeLine{67 \textcolor{keyword}{namespace }gmock\_matchers\_test \{}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{keyword}{using }std::greater;}
\DoxyCodeLine{70 \textcolor{keyword}{using }std::less;}
\DoxyCodeLine{71 \textcolor{keyword}{using }std::list;}
\DoxyCodeLine{72 \textcolor{keyword}{using }std::make\_pair;}
\DoxyCodeLine{73 \textcolor{keyword}{using }std::map;}
\DoxyCodeLine{74 \textcolor{keyword}{using }std::multimap;}
\DoxyCodeLine{75 \textcolor{keyword}{using }std::multiset;}
\DoxyCodeLine{76 \textcolor{keyword}{using }std::ostream;}
\DoxyCodeLine{77 \textcolor{keyword}{using }std::pair;}
\DoxyCodeLine{78 \textcolor{keyword}{using }std::set;}
\DoxyCodeLine{79 \textcolor{keyword}{using }std::stringstream;}
\DoxyCodeLine{80 \textcolor{keyword}{using }std::vector;}
\DoxyCodeLine{81 \textcolor{keyword}{using }testing::internal::DummyMatchResultListener;}
\DoxyCodeLine{82 \textcolor{keyword}{using }testing::internal::ElementMatcherPair;}
\DoxyCodeLine{83 \textcolor{keyword}{using }testing::internal::ElementMatcherPairs;}
\DoxyCodeLine{84 \textcolor{keyword}{using }testing::internal::ElementsAreArrayMatcher;}
\DoxyCodeLine{85 \textcolor{keyword}{using }testing::internal::ExplainMatchFailureTupleTo;}
\DoxyCodeLine{86 \textcolor{keyword}{using }testing::internal::FloatingEqMatcher;}
\DoxyCodeLine{87 \textcolor{keyword}{using }testing::internal::FormatMatcherDescription;}
\DoxyCodeLine{88 \textcolor{keyword}{using }testing::internal::IsReadableTypeName;}
\DoxyCodeLine{89 \textcolor{keyword}{using }testing::internal::MatchMatrix;}
\DoxyCodeLine{90 \textcolor{keyword}{using }testing::internal::PredicateFormatterFromMatcher;}
\DoxyCodeLine{91 \textcolor{keyword}{using }\mbox{\hyperlink{classtesting_1_1internal_1_1RE}{testing::internal::RE}};}
\DoxyCodeLine{92 \textcolor{keyword}{using }testing::internal::StreamMatchResultListener;}
\DoxyCodeLine{93 \textcolor{keyword}{using }testing::internal::Strings;}
\DoxyCodeLine{94 }
\DoxyCodeLine{95 \textcolor{comment}{// Helper for testing container-\/valued matchers in mock method context. It is}}
\DoxyCodeLine{96 \textcolor{comment}{// important to test matchers in this context, since it requires additional type}}
\DoxyCodeLine{97 \textcolor{comment}{// deduction beyond what EXPECT\_THAT does, thus making it more restrictive.}}
\DoxyCodeLine{98 \textcolor{keyword}{struct }\mbox{\hyperlink{structtesting_1_1gmock__matchers__test_1_1ContainerHelper}{ContainerHelper}} \{}
\DoxyCodeLine{99   MOCK\_METHOD1(Call, \textcolor{keywordtype}{void}(std::vector<std::unique\_ptr<int>>));}
\DoxyCodeLine{100 \};}
\DoxyCodeLine{101 }
\DoxyCodeLine{102 \textcolor{comment}{// For testing ExplainMatchResultTo().}}
\DoxyCodeLine{103 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{104 \textcolor{keyword}{struct }\mbox{\hyperlink{structtesting_1_1gmock__matchers__test_1_1GtestGreaterThanMatcher}{GtestGreaterThanMatcher}} \{}
\DoxyCodeLine{105   \textcolor{keyword}{using }is\_gtest\_matcher = void;}
\DoxyCodeLine{106 }
\DoxyCodeLine{107   \textcolor{keywordtype}{void} DescribeTo(ostream* os)\textcolor{keyword}{ const }\{ *os << \textcolor{stringliteral}{"{}is > "{}} << rhs; \}}
\DoxyCodeLine{108   \textcolor{keywordtype}{void} DescribeNegationTo(ostream* os)\textcolor{keyword}{ const }\{ *os << \textcolor{stringliteral}{"{}is <= "{}} << rhs; \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{110   \textcolor{keywordtype}{bool} MatchAndExplain(T lhs, MatchResultListener* listener)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{111     \textcolor{keywordflow}{if} (lhs > rhs) \{}
\DoxyCodeLine{112       *listener << \textcolor{stringliteral}{"{}which is "{}} << (lhs -\/ rhs) << \textcolor{stringliteral}{"{} more than "{}} << rhs;}
\DoxyCodeLine{113     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lhs == rhs) \{}
\DoxyCodeLine{114       *listener << \textcolor{stringliteral}{"{}which is the same as "{}} << rhs;}
\DoxyCodeLine{115     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{116       *listener << \textcolor{stringliteral}{"{}which is "{}} << (rhs -\/ lhs) << \textcolor{stringliteral}{"{} less than "{}} << rhs;}
\DoxyCodeLine{117     \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119     \textcolor{keywordflow}{return} lhs > rhs;}
\DoxyCodeLine{120   \}}
\DoxyCodeLine{121 }
\DoxyCodeLine{122   T rhs;}
\DoxyCodeLine{123 \};}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{126 \mbox{\hyperlink{structtesting_1_1gmock__matchers__test_1_1GtestGreaterThanMatcher}{GtestGreaterThanMatcher<typename std::decay<T>::type}}> GtestGreaterThan(}
\DoxyCodeLine{127     T\&\& rhs) \{}
\DoxyCodeLine{128   \textcolor{keywordflow}{return} \{rhs\};}
\DoxyCodeLine{129 \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \textcolor{comment}{// As the matcher above, but using the base class with virtual functions.}}
\DoxyCodeLine{132 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{133 \textcolor{keyword}{class }\mbox{\hyperlink{classtesting_1_1gmock__matchers__test_1_1GreaterThanMatcher}{GreaterThanMatcher}} : \textcolor{keyword}{public} MatcherInterface<T> \{}
\DoxyCodeLine{134  \textcolor{keyword}{public}:}
\DoxyCodeLine{135   \textcolor{keyword}{explicit} \mbox{\hyperlink{classtesting_1_1gmock__matchers__test_1_1GreaterThanMatcher}{GreaterThanMatcher}}(T rhs) : impl\_\{rhs\} \{\}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137   \textcolor{keywordtype}{void} DescribeTo(ostream* os)\textcolor{keyword}{ const override }\{ impl\_.DescribeTo(os); \}}
\DoxyCodeLine{138   \textcolor{keywordtype}{void} DescribeNegationTo(ostream* os)\textcolor{keyword}{ const override }\{}
\DoxyCodeLine{139     impl\_.DescribeNegationTo(os);}
\DoxyCodeLine{140   \}}
\DoxyCodeLine{141 }
\DoxyCodeLine{142   \textcolor{keywordtype}{bool} MatchAndExplain(T lhs, MatchResultListener* listener)\textcolor{keyword}{ const override }\{}
\DoxyCodeLine{143     \textcolor{keywordflow}{return} impl\_.MatchAndExplain(lhs, listener);}
\DoxyCodeLine{144   \}}
\DoxyCodeLine{145 }
\DoxyCodeLine{146  \textcolor{keyword}{private}:}
\DoxyCodeLine{147   \textcolor{keyword}{const} \mbox{\hyperlink{structtesting_1_1gmock__matchers__test_1_1GtestGreaterThanMatcher}{GtestGreaterThanMatcher<T>}} impl\_;}
\DoxyCodeLine{148 \};}
\DoxyCodeLine{149 }
\DoxyCodeLine{150 \textcolor{comment}{// Names and instantiates a new instance of GTestMatcherTestP.}}
\DoxyCodeLine{151 \textcolor{preprocessor}{\#define INSTANTIATE\_GTEST\_MATCHER\_TEST\_P(TestSuite)                         \(\backslash\)}}
\DoxyCodeLine{152 \textcolor{preprocessor}{  using TestSuite\#\#P = GTestMatcherTestP;                                   \(\backslash\)}}
\DoxyCodeLine{153 \textcolor{preprocessor}{  INSTANTIATE\_TEST\_SUITE\_P(MatcherInterface, TestSuite\#\#P, Values(false));  \(\backslash\)}}
\DoxyCodeLine{154 \textcolor{preprocessor}{  INSTANTIATE\_TEST\_SUITE\_P(GtestMatcher, TestSuite\#\#P, Values(true))}}
\DoxyCodeLine{155 }
\DoxyCodeLine{156 \textcolor{keyword}{class }\mbox{\hyperlink{classtesting_1_1gmock__matchers__test_1_1GTestMatcherTestP}{GTestMatcherTestP}} : \textcolor{keyword}{public} \mbox{\hyperlink{classtesting_1_1TestWithParam}{testing::TestWithParam}}<bool> \{}
\DoxyCodeLine{157  \textcolor{keyword}{public}:}
\DoxyCodeLine{158   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{159   \mbox{\hyperlink{classtesting_1_1Matcher}{Matcher<T>}} GreaterThan(T n) \{}
\DoxyCodeLine{160     \textcolor{keywordflow}{if} (use\_gtest\_matcher\_) \{}
\DoxyCodeLine{161       \textcolor{keywordflow}{return} GtestGreaterThan(n);}
\DoxyCodeLine{162     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{163       \textcolor{keywordflow}{return} MakeMatcher(\textcolor{keyword}{new} \mbox{\hyperlink{classtesting_1_1gmock__matchers__test_1_1GreaterThanMatcher}{GreaterThanMatcher<T>}}(n));}
\DoxyCodeLine{164     \}}
\DoxyCodeLine{165   \}}
\DoxyCodeLine{166   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} use\_gtest\_matcher\_ = GetParam();}
\DoxyCodeLine{167 \};}
\DoxyCodeLine{168 }
\DoxyCodeLine{169 \textcolor{comment}{// Returns the description of the given matcher.}}
\DoxyCodeLine{170 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{171 std::string Describe(\textcolor{keyword}{const} \mbox{\hyperlink{classtesting_1_1Matcher}{Matcher<T>}}\& m) \{}
\DoxyCodeLine{172   \textcolor{keywordflow}{return} DescribeMatcher<T>(m);}
\DoxyCodeLine{173 \}}
\DoxyCodeLine{174 }
\DoxyCodeLine{175 \textcolor{comment}{// Returns the description of the negation of the given matcher.}}
\DoxyCodeLine{176 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{177 std::string DescribeNegation(\textcolor{keyword}{const} \mbox{\hyperlink{classtesting_1_1Matcher}{Matcher<T>}}\& m) \{}
\DoxyCodeLine{178   \textcolor{keywordflow}{return} DescribeMatcher<T>(m, \textcolor{keyword}{true});}
\DoxyCodeLine{179 \}}
\DoxyCodeLine{180 }
\DoxyCodeLine{181 \textcolor{comment}{// Returns the reason why x matches, or doesn't match, m.}}
\DoxyCodeLine{182 \textcolor{keyword}{template} <\textcolor{keyword}{typename} MatcherType, \textcolor{keyword}{typename} Value>}
\DoxyCodeLine{183 std::string Explain(\textcolor{keyword}{const} MatcherType\& m, \textcolor{keyword}{const} Value\& x) \{}
\DoxyCodeLine{184   StringMatchResultListener listener;}
\DoxyCodeLine{185   ExplainMatchResult(m, x, \&listener);}
\DoxyCodeLine{186   \textcolor{keywordflow}{return} listener.str();}
\DoxyCodeLine{187 \}}
\DoxyCodeLine{188 }
\DoxyCodeLine{189 \}  \textcolor{comment}{// namespace gmock\_matchers\_test}}
\DoxyCodeLine{190 \}  \textcolor{comment}{// namespace testing}}
\DoxyCodeLine{191 }
\DoxyCodeLine{192 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// GOOGLEMOCK\_TEST\_GMOCK\_MATCHERS\_TEST\_H\_}}

\end{DoxyCode}
