\hypertarget{gtest-string_8h_source}{}\doxysection{gtest-\/string.h}
\label{gtest-string_8h_source}\index{build/\_deps/googletest-\/src/googletest/include/gtest/internal/gtest-\/string.h@{build/\_deps/googletest-\/src/googletest/include/gtest/internal/gtest-\/string.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// Copyright 2005, Google Inc.}}
\DoxyCodeLine{2 \textcolor{comment}{// All rights reserved.}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 \textcolor{comment}{// Redistribution and use in source and binary forms, with or without}}
\DoxyCodeLine{5 \textcolor{comment}{// modification, are permitted provided that the following conditions are}}
\DoxyCodeLine{6 \textcolor{comment}{// met:}}
\DoxyCodeLine{7 \textcolor{comment}{//}}
\DoxyCodeLine{8 \textcolor{comment}{//     * Redistributions of source code must retain the above copyright}}
\DoxyCodeLine{9 \textcolor{comment}{// notice, this list of conditions and the following disclaimer.}}
\DoxyCodeLine{10 \textcolor{comment}{//     * Redistributions in binary form must reproduce the above}}
\DoxyCodeLine{11 \textcolor{comment}{// copyright notice, this list of conditions and the following disclaimer}}
\DoxyCodeLine{12 \textcolor{comment}{// in the documentation and/or other materials provided with the}}
\DoxyCodeLine{13 \textcolor{comment}{// distribution.}}
\DoxyCodeLine{14 \textcolor{comment}{//     * Neither the name of Google Inc. nor the names of its}}
\DoxyCodeLine{15 \textcolor{comment}{// contributors may be used to endorse or promote products derived from}}
\DoxyCodeLine{16 \textcolor{comment}{// this software without specific prior written permission.}}
\DoxyCodeLine{17 \textcolor{comment}{//}}
\DoxyCodeLine{18 \textcolor{comment}{// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS}}
\DoxyCodeLine{19 \textcolor{comment}{// "{}AS IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT}}
\DoxyCodeLine{20 \textcolor{comment}{// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR}}
\DoxyCodeLine{21 \textcolor{comment}{// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT}}
\DoxyCodeLine{22 \textcolor{comment}{// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,}}
\DoxyCodeLine{23 \textcolor{comment}{// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT}}
\DoxyCodeLine{24 \textcolor{comment}{// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,}}
\DoxyCodeLine{25 \textcolor{comment}{// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY}}
\DoxyCodeLine{26 \textcolor{comment}{// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT}}
\DoxyCodeLine{27 \textcolor{comment}{// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE}}
\DoxyCodeLine{28 \textcolor{comment}{// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{comment}{// The Google C++ Testing and Mocking Framework (Google Test)}}
\DoxyCodeLine{31 \textcolor{comment}{//}}
\DoxyCodeLine{32 \textcolor{comment}{// This header file declares the String class and functions used internally by}}
\DoxyCodeLine{33 \textcolor{comment}{// Google Test.  They are subject to change without notice. They should not used}}
\DoxyCodeLine{34 \textcolor{comment}{// by code external to Google Test.}}
\DoxyCodeLine{35 \textcolor{comment}{//}}
\DoxyCodeLine{36 \textcolor{comment}{// This header file is \#included by gtest-\/internal.h.}}
\DoxyCodeLine{37 \textcolor{comment}{// It should not be \#included by other files.}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{comment}{// IWYU pragma: private, include "{}gtest/gtest.h"{}}}
\DoxyCodeLine{40 \textcolor{comment}{// IWYU pragma: friend gtest/.*}}
\DoxyCodeLine{41 \textcolor{comment}{// IWYU pragma: friend gmock/.*}}
\DoxyCodeLine{42 }
\DoxyCodeLine{43 \textcolor{preprocessor}{\#ifndef GOOGLETEST\_INCLUDE\_GTEST\_INTERNAL\_GTEST\_STRING\_H\_}}
\DoxyCodeLine{44 \textcolor{preprocessor}{\#define GOOGLETEST\_INCLUDE\_GTEST\_INTERNAL\_GTEST\_STRING\_H\_}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{preprocessor}{\#ifdef \_\_BORLANDC\_\_}}
\DoxyCodeLine{47 \textcolor{comment}{// string.h is not guaranteed to provide strcpy on C++ Builder.}}
\DoxyCodeLine{48 \textcolor{preprocessor}{\#include <mem.h>}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 \textcolor{preprocessor}{\#include "{}gtest/internal/gtest-\/port.h"{}}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58 \textcolor{keyword}{namespace }testing \{}
\DoxyCodeLine{59 \textcolor{keyword}{namespace }internal \{}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \textcolor{comment}{// String -\/ an abstract class holding static string utilities.}}
\DoxyCodeLine{62 \textcolor{keyword}{class }GTEST\_API\_ \mbox{\hyperlink{classtesting_1_1internal_1_1String}{String}} \{}
\DoxyCodeLine{63  \textcolor{keyword}{public}:}
\DoxyCodeLine{64   \textcolor{comment}{// Static utility methods}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66   \textcolor{comment}{// Clones a 0-\/terminated C string, allocating memory using new.  The}}
\DoxyCodeLine{67   \textcolor{comment}{// caller is responsible for deleting the return value using}}
\DoxyCodeLine{68   \textcolor{comment}{// delete[].  Returns the cloned string, or NULL if the input is}}
\DoxyCodeLine{69   \textcolor{comment}{// NULL.}}
\DoxyCodeLine{70   \textcolor{comment}{//}}
\DoxyCodeLine{71   \textcolor{comment}{// This is different from strdup() in string.h, which allocates}}
\DoxyCodeLine{72   \textcolor{comment}{// memory using malloc().}}
\DoxyCodeLine{73   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* CloneCString(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* c\_str);}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 \textcolor{preprocessor}{\#if GTEST\_OS\_WINDOWS\_MOBILE}}
\DoxyCodeLine{76   \textcolor{comment}{// Windows CE does not have the 'ANSI' versions of Win32 APIs. To be}}
\DoxyCodeLine{77   \textcolor{comment}{// able to pass strings to Win32 APIs on CE we need to convert them}}
\DoxyCodeLine{78   \textcolor{comment}{// to 'Unicode', UTF-\/16.}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80   \textcolor{comment}{// Creates a UTF-\/16 wide string from the given ANSI string, allocating}}
\DoxyCodeLine{81   \textcolor{comment}{// memory using new. The caller is responsible for deleting the return}}
\DoxyCodeLine{82   \textcolor{comment}{// value using delete[]. Returns the wide string, or NULL if the}}
\DoxyCodeLine{83   \textcolor{comment}{// input is NULL.}}
\DoxyCodeLine{84   \textcolor{comment}{//}}
\DoxyCodeLine{85   \textcolor{comment}{// The wide string is created using the ANSI codepage (CP\_ACP) to}}
\DoxyCodeLine{86   \textcolor{comment}{// match the behaviour of the ANSI versions of Win32 calls and the}}
\DoxyCodeLine{87   \textcolor{comment}{// C runtime.}}
\DoxyCodeLine{88   \textcolor{keyword}{static} LPCWSTR AnsiToUtf16(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* c\_str);}
\DoxyCodeLine{89 }
\DoxyCodeLine{90   \textcolor{comment}{// Creates an ANSI string from the given wide string, allocating}}
\DoxyCodeLine{91   \textcolor{comment}{// memory using new. The caller is responsible for deleting the return}}
\DoxyCodeLine{92   \textcolor{comment}{// value using delete[]. Returns the ANSI string, or NULL if the}}
\DoxyCodeLine{93   \textcolor{comment}{// input is NULL.}}
\DoxyCodeLine{94   \textcolor{comment}{//}}
\DoxyCodeLine{95   \textcolor{comment}{// The returned string is created using the ANSI codepage (CP\_ACP) to}}
\DoxyCodeLine{96   \textcolor{comment}{// match the behaviour of the ANSI versions of Win32 calls and the}}
\DoxyCodeLine{97   \textcolor{comment}{// C runtime.}}
\DoxyCodeLine{98   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* Utf16ToAnsi(LPCWSTR utf16\_str);}
\DoxyCodeLine{99 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101   \textcolor{comment}{// Compares two C strings.  Returns true if and only if they have the same}}
\DoxyCodeLine{102   \textcolor{comment}{// content.}}
\DoxyCodeLine{103   \textcolor{comment}{//}}
\DoxyCodeLine{104   \textcolor{comment}{// Unlike strcmp(), this function can handle NULL argument(s).  A}}
\DoxyCodeLine{105   \textcolor{comment}{// NULL C string is considered different to any non-\/NULL C string,}}
\DoxyCodeLine{106   \textcolor{comment}{// including the empty string.}}
\DoxyCodeLine{107   \textcolor{keyword}{static} \textcolor{keywordtype}{bool} CStringEquals(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* lhs, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* rhs);}
\DoxyCodeLine{108 }
\DoxyCodeLine{109   \textcolor{comment}{// Converts a wide C string to a String using the UTF-\/8 encoding.}}
\DoxyCodeLine{110   \textcolor{comment}{// NULL will be converted to "{}(null)"{}.  If an error occurred during}}
\DoxyCodeLine{111   \textcolor{comment}{// the conversion, "{}(failed to convert from wide string)"{} is}}
\DoxyCodeLine{112   \textcolor{comment}{// returned.}}
\DoxyCodeLine{113   \textcolor{keyword}{static} std::string ShowWideCString(\textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* wide\_c\_str);}
\DoxyCodeLine{114 }
\DoxyCodeLine{115   \textcolor{comment}{// Compares two wide C strings.  Returns true if and only if they have the}}
\DoxyCodeLine{116   \textcolor{comment}{// same content.}}
\DoxyCodeLine{117   \textcolor{comment}{//}}
\DoxyCodeLine{118   \textcolor{comment}{// Unlike wcscmp(), this function can handle NULL argument(s).  A}}
\DoxyCodeLine{119   \textcolor{comment}{// NULL C string is considered different to any non-\/NULL C string,}}
\DoxyCodeLine{120   \textcolor{comment}{// including the empty string.}}
\DoxyCodeLine{121   \textcolor{keyword}{static} \textcolor{keywordtype}{bool} WideCStringEquals(\textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* lhs, \textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* rhs);}
\DoxyCodeLine{122 }
\DoxyCodeLine{123   \textcolor{comment}{// Compares two C strings, ignoring case.  Returns true if and only if}}
\DoxyCodeLine{124   \textcolor{comment}{// they have the same content.}}
\DoxyCodeLine{125   \textcolor{comment}{//}}
\DoxyCodeLine{126   \textcolor{comment}{// Unlike strcasecmp(), this function can handle NULL argument(s).}}
\DoxyCodeLine{127   \textcolor{comment}{// A NULL C string is considered different to any non-\/NULL C string,}}
\DoxyCodeLine{128   \textcolor{comment}{// including the empty string.}}
\DoxyCodeLine{129   \textcolor{keyword}{static} \textcolor{keywordtype}{bool} CaseInsensitiveCStringEquals(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* lhs, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* rhs);}
\DoxyCodeLine{130 }
\DoxyCodeLine{131   \textcolor{comment}{// Compares two wide C strings, ignoring case.  Returns true if and only if}}
\DoxyCodeLine{132   \textcolor{comment}{// they have the same content.}}
\DoxyCodeLine{133   \textcolor{comment}{//}}
\DoxyCodeLine{134   \textcolor{comment}{// Unlike wcscasecmp(), this function can handle NULL argument(s).}}
\DoxyCodeLine{135   \textcolor{comment}{// A NULL C string is considered different to any non-\/NULL wide C string,}}
\DoxyCodeLine{136   \textcolor{comment}{// including the empty string.}}
\DoxyCodeLine{137   \textcolor{comment}{// NB: The implementations on different platforms slightly differ.}}
\DoxyCodeLine{138   \textcolor{comment}{// On windows, this method uses \_wcsicmp which compares according to LC\_CTYPE}}
\DoxyCodeLine{139   \textcolor{comment}{// environment variable. On GNU platform this method uses wcscasecmp}}
\DoxyCodeLine{140   \textcolor{comment}{// which compares according to LC\_CTYPE category of the current locale.}}
\DoxyCodeLine{141   \textcolor{comment}{// On MacOS X, it uses towlower, which also uses LC\_CTYPE category of the}}
\DoxyCodeLine{142   \textcolor{comment}{// current locale.}}
\DoxyCodeLine{143   \textcolor{keyword}{static} \textcolor{keywordtype}{bool} CaseInsensitiveWideCStringEquals(\textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* lhs,}
\DoxyCodeLine{144                                                \textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* rhs);}
\DoxyCodeLine{145 }
\DoxyCodeLine{146   \textcolor{comment}{// Returns true if and only if the given string ends with the given suffix,}}
\DoxyCodeLine{147   \textcolor{comment}{// ignoring case. Any string is considered to end with an empty suffix.}}
\DoxyCodeLine{148   \textcolor{keyword}{static} \textcolor{keywordtype}{bool} EndsWithCaseInsensitive(\textcolor{keyword}{const} std::string\& str,}
\DoxyCodeLine{149                                       \textcolor{keyword}{const} std::string\& suffix);}
\DoxyCodeLine{150 }
\DoxyCodeLine{151   \textcolor{comment}{// Formats an int value as "{}\%02d"{}.}}
\DoxyCodeLine{152   \textcolor{keyword}{static} std::string FormatIntWidth2(\textcolor{keywordtype}{int} value);  \textcolor{comment}{// "{}\%02d"{} for width == 2}}
\DoxyCodeLine{153 }
\DoxyCodeLine{154   \textcolor{comment}{// Formats an int value to given width with leading zeros.}}
\DoxyCodeLine{155   \textcolor{keyword}{static} std::string FormatIntWidthN(\textcolor{keywordtype}{int} value, \textcolor{keywordtype}{int} width);}
\DoxyCodeLine{156 }
\DoxyCodeLine{157   \textcolor{comment}{// Formats an int value as "{}\%X"{}.}}
\DoxyCodeLine{158   \textcolor{keyword}{static} std::string FormatHexInt(\textcolor{keywordtype}{int} value);}
\DoxyCodeLine{159 }
\DoxyCodeLine{160   \textcolor{comment}{// Formats an int value as "{}\%X"{}.}}
\DoxyCodeLine{161   \textcolor{keyword}{static} std::string FormatHexUInt32(uint32\_t value);}
\DoxyCodeLine{162 }
\DoxyCodeLine{163   \textcolor{comment}{// Formats a byte as "{}\%02X"{}.}}
\DoxyCodeLine{164   \textcolor{keyword}{static} std::string FormatByte(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} value);}
\DoxyCodeLine{165 }
\DoxyCodeLine{166  \textcolor{keyword}{private}:}
\DoxyCodeLine{167   \mbox{\hyperlink{classtesting_1_1internal_1_1String}{String}}();  \textcolor{comment}{// Not meant to be instantiated.}}
\DoxyCodeLine{168 \};           \textcolor{comment}{// class String}}
\DoxyCodeLine{169 }
\DoxyCodeLine{170 \textcolor{comment}{// Gets the content of the stringstream's buffer as an std::string.  Each '\(\backslash\)0'}}
\DoxyCodeLine{171 \textcolor{comment}{// character in the buffer is replaced with "{}\(\backslash\)\(\backslash\)0"{}.}}
\DoxyCodeLine{172 GTEST\_API\_ std::string StringStreamToString(::std::stringstream* stream);}
\DoxyCodeLine{173 }
\DoxyCodeLine{174 \}  \textcolor{comment}{// namespace internal}}
\DoxyCodeLine{175 \}  \textcolor{comment}{// namespace testing}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// GOOGLETEST\_INCLUDE\_GTEST\_INTERNAL\_GTEST\_STRING\_H\_}}

\end{DoxyCode}
